{
  "version": 3,
  "sources": [
    "admin-cv.js"
  ],
  "names": [
    "achievementTemplate",
    "document",
    "getElementById",
    "achievementsList",
    "addAchievementButton",
    "addLinkButton",
    "dateField",
    "deleteButton",
    "dropdown",
    "endYearField",
    "filesList",
    "fileUpload",
    "forthcomingBox",
    "linksList",
    "linkTemplate",
    "ongoingBox",
    "uploadFileButton",
    "getListItem",
    "node",
    "tagName",
    "parentNode",
    "isDeleteButton",
    "classList",
    "contains",
    "addAchievement",
    "li",
    "content",
    "querySelector",
    "cloneNode",
    "appendChild",
    "addLink",
    "name",
    "value",
    "confirmDeletion",
    "preventDefault",
    "confirmed",
    "confirm",
    "confirmFileDeletion",
    "ev",
    "target",
    "deleteAchievement",
    "remove",
    "deleteLink",
    "toggleDateField",
    "required",
    "checked",
    "disabled",
    "toggleEndYearField",
    "updateLinkType",
    "type",
    "inputField",
    "nextElementSibling",
    "updateType",
    "window",
    "location",
    "validateFile",
    "files",
    "length",
    "setCustomValidity",
    "onchange",
    "onclick"
  ],
  "mappings": ";;AAAA;;;;AAIA;;AAEA;;;;AAIA;AACA,IAAMA,sBAAuBC,SAASC,cAAT,wBAA7B;AACA,IAAMC,mBAAuBF,SAASC,cAAT,gBAA7B;AACA,IAAME,uBAAuBH,SAASC,cAAT,kBAA7B;AACA,IAAMG,gBAAuBJ,SAASC,cAAT,WAA7B;AACA,IAAMI,YAAuBL,SAASC,cAAT,QAA7B;AACA,IAAMK,eAAuBN,SAASC,cAAT,UAA7B;AACA,IAAMM,WAAuBP,SAASC,cAAT,YAA7B;AACA,IAAMO,eAAuBR,SAASC,cAAT,WAA7B;AACA,IAAMQ,YAAuBT,SAASC,cAAT,SAA7B;AACA,IAAMS,aAAuBV,SAASC,cAAT,cAA7B;AACA,IAAMU,iBAAuBX,SAASC,cAAT,eAA7B;AACA,IAAMW,YAAuBZ,SAASC,cAAT,SAA7B;AACA,IAAMY,eAAuBb,SAASC,cAAT,iBAA7B;AACA,IAAMa,aAAuBd,SAASC,cAAT,WAA7B;AACA,IAAMc,mBAAuBf,SAASC,cAAT,oBAA7B;;AAEA;AACA,IAAMe,cAAc,SAAdA,WAAc,OAAQ;AAC1B,MAAIC,KAAKC,OAAL,SAAJ,EAA2B,OAAOD,IAAP;AAC3B,SAAOD,YAAYC,KAAKE,UAAjB,CAAP;AACD,CAHD;;AAKA,IAAMC,iBAAiB,SAAjBA,cAAiB,OAAQ;AAC7B,MAAIH,KAAKI,SAAL,IAAkBJ,KAAKI,SAAL,CAAeC,QAAf,SAAtB,EAAwD,OAAO,IAAP;AACxD,MAAIL,KAAKE,UAAT,EAAqB,OAAOC,eAAeH,KAAKE,UAApB,CAAP;AACrB,SAAO,KAAP;AACD,CAJD;;AAMA;AACA,IAAMI,iBAAiB,SAAjBA,cAAiB,GAAM;AAC3B,MAAMC,KAAKzB,oBAAoB0B,OAApB,CAA4BC,aAA5B,OAAgDC,SAAhD,CAA0D,IAA1D,CAAX;AACAzB,mBAAiB0B,WAAjB,CAA6BJ,EAA7B;AACD,CAHD;;AAKA,IAAMK,UAAU,SAAVA,OAAU,GAAM;AACpB,MAAML,KAAKX,aAAaY,OAAb,CAAqBC,aAArB,OAAyCC,SAAzC,CAAmD,IAAnD,CAAX;AACAf,YAAUgB,WAAV,CAAsBJ,EAAtB;AACAA,KAAGE,aAAH,UAA0BI,IAA1B,GAAiCN,GAAGE,aAAH,WAA2BK,KAA5D;AACD,CAJD;;AAMA,IAAMC,kBAAkB,SAAlBA,eAAkB,OAAwB;AAAA,MAArBC,cAAqB,QAArBA,cAAqB;;;AAE9C,MAAMC,YAAYC,4IAAlB;;AAEA,MAAI,CAACD,SAAL,EAAgBD;AAEjB,CAND;;AAQA;AACA,IAAMG,sBAAsB,SAAtBA,mBAAsB,KAAM;AAChC,MAAI,CAAChB,eAAeiB,GAAGC,MAAlB,CAAL,EAAgC;AAChC,MAAMJ,YAAYC,4EAAlB;AACA,MAAI,CAACD,SAAL,EAAgBG,GAAGJ,cAAH;AACjB,CAJD;;AAMA,IAAMM,oBAAoB,SAApBA,iBAAoB,QAAgB;AAAA,MAAbD,MAAa,SAAbA,MAAa;;AACxC,MAAI,CAAClB,eAAekB,MAAf,CAAL,EAA6B;AAC7B,MAAMd,KAAKR,YAAYsB,MAAZ,CAAX;AACA,MAAMJ,YAAYC,mFAAlB;AACA,MAAID,SAAJ,EAAeV,GAAGgB,MAAH;AAChB,CALD;;AAOA,IAAMC,aAAa,SAAbA,UAAa,QAAgB;AAAA,MAAbH,MAAa,SAAbA,MAAa;;AACjC,MAAI,CAAClB,eAAekB,MAAf,CAAL,EAA6B;AAC7B,MAAMd,KAAKR,YAAYsB,MAAZ,CAAX;AACA,MAAMJ,YAAYC,4EAAlB;AACA,MAAID,SAAJ,EAAeV,GAAGgB,MAAH;AAChB,CALD;;AAOA,IAAME,kBAAkB,SAAlBA,eAAkB,GAAM;AAC5BrC,YAAUsC,QAAV,GAAqB,CAAChC,eAAeiC,OAArC;AACAvC,YAAUwC,QAAV,GAAqBlC,eAAeiC,OAApC;AACD,CAHD;;AAKA,IAAME,qBAAqB,SAArBA,kBAAqB,GAAM;AAC/BtC,eAAamC,QAAb,GAAwB,CAAC7B,WAAW8B,OAApC;AACApC,eAAaqC,QAAb,GAAwB/B,WAAW8B,OAAnC;AACD,CAHD;;AAKA,IAAMG,iBAAiB,SAAjBA,cAAiB,QAAgB;AAAA,MAAbT,MAAa,SAAbA,MAAa;;AACrC,MAAMU,OAAaV,OAAOP,KAA1B;AACA,MAAMkB,aAAaX,OAAOY,kBAA1B;AACAD,aAAWnB,IAAX,GAAmBkB,IAAnB;AACD,CAJD;;AAMA,IAAMG,aAAa,SAAbA,UAAa,QAA2B;AAAA,MAAdpB,KAAc,SAAxBO,MAAwB,CAAdP,KAAc;;AAC5CqB,SAAOC,QAAP,eAA4BtB,KAA5B;AACD,CAFD;;AAIA,IAAMuB,eAAe,SAAfA,YAAe,QAAwB;AAAA,MAArBrB,cAAqB,SAArBA,cAAqB;;AAC3C,MAAI,CAACvB,WAAW6C,KAAX,CAAiBC,MAAtB,EAA8B;AAC5B9C,eAAW+C,iBAAX;AACAxB;AACD;AACF,CALD;;AAOA;AACA1B,SAASmD,QAAT,GAAoBP,UAApB;;AAEA,IAAIjD,gBAAJ,EAAsBA,iBAAiByD,OAAjB,GAA2BpB,iBAA3B;AACtB,IAAIpC,oBAAJ,EAA0BA,qBAAqBwD,OAArB,GAA+BpC,cAA/B;AAC1B,IAAInB,aAAJ,EAAmBA,cAAcuD,OAAd,GAAwB9B,OAAxB;AACnB,IAAIvB,YAAJ,EAAkBA,aAAaqD,OAAb,GAAuB3B,eAAvB;AAClB,IAAIvB,SAAJ,EAAeA,UAAUkD,OAAV,GAAoBvB,mBAApB;AACf,IAAIzB,cAAJ,EAAoBA,eAAe+C,QAAf,GAA0BhB,eAA1B;AACpB,IAAI5B,UAAJ,EAAgBA,WAAW4C,QAAX,GAAsBZ,kBAAtB;AAChB,IAAI/B,gBAAJ,EAAsBA,iBAAiB4C,OAAjB,GAA2BL,YAA3B;;AAEtB,IAAI1C,SAAJ,EAAe;AACbA,YAAU+C,OAAV,GAAqBlB,UAArB;AACA7B,YAAU8C,QAAV,GAAqBX,cAArB;AACD",
  "file": "admin-cv.js",
  "sourcesContent": [
    "/**\r\n * Client-side JavaScript for the CV Editor page\r\n */\r\n\r\n/* eslint-env browser */\r\n\r\n/* eslint-disable\r\n  no-alert,\r\n*/\r\n\r\n// Elements\r\nconst achievementTemplate  = document.getElementById(`achievement-template`);\r\nconst achievementsList     = document.getElementById(`achievements`);\r\nconst addAchievementButton = document.getElementById(`addAchievement`);\r\nconst addLinkButton        = document.getElementById(`addLink`);\r\nconst dateField            = document.getElementById(`date`);\r\nconst deleteButton         = document.getElementById(`delete`);\r\nconst dropdown             = document.getElementById(`dropdown`);\r\nconst endYearField         = document.getElementById(`endYear`);\r\nconst filesList            = document.getElementById(`files`);\r\nconst fileUpload           = document.getElementById(`fileUpload`);\r\nconst forthcomingBox       = document.getElementById(`forthcoming`);\r\nconst linksList            = document.getElementById(`links`);\r\nconst linkTemplate         = document.getElementById(`link-template`);\r\nconst ongoingBox           = document.getElementById(`ongoing`);\r\nconst uploadFileButton     = document.getElementById(`uploadFileButton`);\r\n\r\n// Utilities\r\nconst getListItem = node => {\r\n  if (node.tagName === `LI`) return node;\r\n  return getListItem(node.parentNode);\r\n};\r\n\r\nconst isDeleteButton = node => {\r\n  if (node.classList && node.classList.contains(`trash`)) return true;\r\n  if (node.parentNode) return isDeleteButton(node.parentNode);\r\n  return false;\r\n};\r\n\r\n// Handlers\r\nconst addAchievement = () => {\r\n  const li = achievementTemplate.content.querySelector(`li`).cloneNode(true);\r\n  achievementsList.appendChild(li);\r\n};\r\n\r\nconst addLink = () => {\r\n  const li = linkTemplate.content.querySelector(`li`).cloneNode(true);\r\n  linksList.appendChild(li);\r\n  li.querySelector(`input`).name = li.querySelector(`select`).value;\r\n};\r\n\r\nconst confirmDeletion = ({ preventDefault }) => {\r\n\r\n  const confirmed = confirm(`Are you sure you want to delete this CV item? It will still be accessible for 30 days in the database if you decide to delete it.`);\r\n\r\n  if (!confirmed) preventDefault();\r\n\r\n};\r\n\r\n// NB: Cannot use destructuring with preventDefault for some reason\r\nconst confirmFileDeletion = ev => {\r\n  if (!isDeleteButton(ev.target)) return;\r\n  const confirmed = confirm(`Are you sure you want to delete this file? This cannot be undone.`);\r\n  if (!confirmed) ev.preventDefault();\r\n};\r\n\r\nconst deleteAchievement = ({ target }) => {\r\n  if (!isDeleteButton(target)) return;\r\n  const li = getListItem(target);\r\n  const confirmed = confirm(`Are you sure you want to delete this achievement? This cannot be undone.`);\r\n  if (confirmed) li.remove();\r\n};\r\n\r\nconst deleteLink = ({ target }) => {\r\n  if (!isDeleteButton(target)) return;\r\n  const li = getListItem(target);\r\n  const confirmed = confirm(`Are you sure you want to delete this link? This cannot be undone.`);\r\n  if (confirmed) li.remove();\r\n};\r\n\r\nconst toggleDateField = () => {\r\n  dateField.required = !forthcomingBox.checked;\r\n  dateField.disabled = forthcomingBox.checked;\r\n};\r\n\r\nconst toggleEndYearField = () => {\r\n  endYearField.required = !ongoingBox.checked;\r\n  endYearField.disabled = ongoingBox.checked;\r\n};\r\n\r\nconst updateLinkType = ({ target }) => {\r\n  const type       = target.value;\r\n  const inputField = target.nextElementSibling;\r\n  inputField.name  = type;\r\n};\r\n\r\nconst updateType = ({ target: { value } }) => {\r\n  window.location = `/admin/${value}`;\r\n};\r\n\r\nconst validateFile = ({ preventDefault }) => {\r\n  if (!fileUpload.files.length) {\r\n    fileUpload.setCustomValidity(`Please select a file to upload.`);\r\n    preventDefault();\r\n  }\r\n};\r\n\r\n// Attach handlers\r\ndropdown.onchange = updateType;\r\n\r\nif (achievementsList) achievementsList.onclick = deleteAchievement;\r\nif (addAchievementButton) addAchievementButton.onclick = addAchievement;\r\nif (addLinkButton) addLinkButton.onclick = addLink;\r\nif (deleteButton) deleteButton.onclick = confirmDeletion;\r\nif (filesList) filesList.onclick = confirmFileDeletion;\r\nif (forthcomingBox) forthcomingBox.onchange = toggleDateField;\r\nif (ongoingBox) ongoingBox.onchange = toggleEndYearField;\r\nif (uploadFileButton) uploadFileButton.onclick = validateFile;\r\n\r\nif (linksList) {\r\n  linksList.onclick  = deleteLink;\r\n  linksList.onchange = updateLinkType;\r\n}\r\n"
  ]
}